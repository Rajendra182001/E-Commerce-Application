{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajen\\\\Downloads\\\\springboot-backend\\\\springboot-frontend\\\\src\\\\cart\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext({\n  data: [],\n  isError: \"\",\n  cart: [],\n  addToCart: product => {},\n  removeFromCart: productId => {},\n  refreshData: () => {},\n  clearCart: () => {}\n});\nexport const AppProvider = ({\n  children\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [isError, setIsError] = useState(\"\");\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\n  const addToCart = product => {\n    const existingProductIndex = cart.findIndex(item => item.id === product.id);\n    if (existingProductIndex !== -1) {\n      const updatedCart = cart.map((item, index) => index === existingProductIndex ? {\n        ...item,\n        quantity: item.quantity + 1\n      } : item);\n      setCart(updatedCart);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    } else {\n      const updatedCart = [...cart, {\n        ...product,\n        quantity: 1\n      }];\n      setCart(updatedCart);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    }\n  };\n  const removeFromCart = productId => {\n    const updatedCart = cart.filter(item => item.id !== productId);\n    setCart(updatedCart);\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n  };\n  const refreshData = async () => {\n    try {\n      const response = await axios.get(\"/product\");\n      if (response.status === 200) {\n        setData(response.data);\n      } else {\n        setIsError(\"Failed to fetch products\");\n      }\n    } catch (error) {\n      setIsError(error.message || \"An error occurred\");\n    }\n  };\n  const clearCart = () => {\n    setCart([]);\n    localStorage.setItem('cart', JSON.stringify([])); // Clear localStorage as well\n  };\n  useEffect(() => {\n    refreshData();\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      data,\n      isError,\n      cart,\n      addToCart,\n      removeFromCart,\n      refreshData,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(AppProvider, \"tDJUC+H9uKWeYVXXrfaiL3FNAJg=\");\n_c = AppProvider;\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","jsxDEV","_jsxDEV","AppContext","data","isError","cart","addToCart","product","removeFromCart","productId","refreshData","clearCart","AppProvider","children","_s","setData","setIsError","setCart","JSON","parse","localStorage","getItem","existingProductIndex","findIndex","item","id","updatedCart","map","index","quantity","setItem","stringify","filter","response","get","status","error","message","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/rajen/Downloads/springboot-backend/springboot-frontend/src/cart/Cart.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst AppContext = createContext({\r\n  data: [],\r\n  isError: \"\",\r\n  cart: [],\r\n  addToCart: (product) => {},\r\n  removeFromCart: (productId) => {},\r\n  refreshData: () => {},\r\n  clearCart: () => {}\r\n});\r\n\r\nexport const AppProvider = ({ children }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isError, setIsError] = useState(\"\");\r\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\r\n\r\n  const addToCart = (product) => {\r\n    const existingProductIndex = cart.findIndex((item) => item.id === product.id);\r\n    if (existingProductIndex !== -1) {\r\n      const updatedCart = cart.map((item, index) =>\r\n        index === existingProductIndex ? { ...item, quantity: item.quantity + 1 } : item\r\n      );\r\n      setCart(updatedCart);\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    } else {\r\n      const updatedCart = [...cart, { ...product, quantity: 1 }];\r\n      setCart(updatedCart);\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    }\r\n  };\r\n\r\n  const removeFromCart = (productId) => {\r\n    const updatedCart = cart.filter((item) => item.id !== productId);\r\n    setCart(updatedCart);\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n  };\r\n\r\n  const refreshData = async () => {\r\n    try {\r\n      const response = await axios.get(\"/product\");\r\n      if (response.status === 200) {\r\n        setData(response.data);\r\n      } else {\r\n        setIsError(\"Failed to fetch products\");\r\n      }\r\n    } catch (error) {\r\n      setIsError(error.message || \"An error occurred\");\r\n    }\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n    localStorage.setItem('cart', JSON.stringify([])); // Clear localStorage as well\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  return (\r\n    <AppContext.Provider value={{ data, isError, cart, addToCart, removeFromCart, refreshData, clearCart }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AppContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}