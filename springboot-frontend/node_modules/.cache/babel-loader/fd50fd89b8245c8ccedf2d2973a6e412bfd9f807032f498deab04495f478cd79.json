{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajen\\\\Downloads\\\\springboot-backend\\\\springboot-frontend\\\\src\\\\cart\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { Children, createContext, useEffect, useState } from 'react';\nimport Product from '../user/Product';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext({\n  data: [],\n  isError: \"\",\n  cart: [],\n  addToCart: product => {},\n  removeFromCart: id => {},\n  refreshData: () => {},\n  updateStockQuantity: (id, newQuantity) => {}\n});\nexport const AppProvider = ({\n  children\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [isError, setIsError] = useState(\"\");\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\n  const addToCart = product => {\n    const existingProductIndex = cart.findIndex(item => item.id === product.id); // find the product \n    if (existingProductIndex !== -1) {\n      const updatedCart = cart.map((item, index) => {\n        if (index === existingProductIndex) {\n          return {\n            ...item,\n            quantity: item.quantity + 1\n          }; //id:item:id,name:item.name,quantity:item.quantity\n        } else {\n          return item;\n        }\n      });\n      setCart(updatedCart);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    } else {\n      const updatedCart = [...cart, {\n        ...product,\n        quantity: 1\n      }];\n      setCart(updatedCart);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    }\n  };\n  const removeFromCart = id => {\n    console.log(\"id\", id);\n    const updatedCart = cart.filter(item => item.id !== id);\n    setCart(updatedCart);\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n    console.log(\"CART\", cart);\n  };\n  const refreshData = async () => {\n    try {\n      const response = await axios.get(\"/products\");\n      setData(response.data);\n    } catch (error) {\n      setIsError(error.message);\n    }\n  };\n  const clearCart = () => {\n    setCart([]);\n  };\n  useEffect(() => {\n    refreshData();\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      data,\n      isError,\n      cart,\n      addToCart,\n      removeFromCart,\n      refreshData,\n      clearCart\n    },\n    children: Children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(AppProvider, \"IaX9NDcyfjNMiybvmy0ufMQ7cb8=\");\n_c = AppProvider;\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","Children","createContext","useEffect","useState","Product","axios","jsxDEV","_jsxDEV","AppContext","data","isError","cart","addToCart","product","removeFromCart","id","refreshData","updateStockQuantity","newQuantity","AppProvider","children","_s","setData","setIsError","setCart","JSON","parse","localStorage","getItem","existingProductIndex","findIndex","item","updatedCart","map","index","quantity","setItem","stringify","console","log","filter","response","get","error","message","clearCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/rajen/Downloads/springboot-backend/springboot-frontend/src/cart/Cart.js"],"sourcesContent":["import React, { Children, createContext, useEffect, useState } from 'react'\r\nimport Product from '../user/Product';\r\nimport axios from 'axios';\r\n\r\nconst AppContext = createContext({\r\ndata:[],\r\nisError:\"\",\r\ncart:[],\r\naddToCart:(product)=>{},\r\nremoveFromCart:(id)=>{},\r\nrefreshData:()=>{},\r\nupdateStockQuantity:(id,newQuantity)=>{}\r\n}); \r\n\r\nexport const AppProvider =({children})=>{\r\nconst[data,setData]=useState([]);\r\nconst[isError,setIsError]=useState(\"\");\r\nconst [cart,setCart]=useState(JSON.parse(localStorage.getItem('cart'))||[]);\r\n\r\nconst addToCart=(product)=>{\r\n   const   existingProductIndex = cart.findIndex((item)=>item.id === product.id); // find the product \r\n   if (existingProductIndex !== -1) {\r\n    const updatedCart = cart.map((item, index) =>{\r\n      if(index === existingProductIndex){\r\n        return {...item,quantity:item.quantity+1};   //id:item:id,name:item.name,quantity:item.quantity\r\n      }else{\r\n        return item;\r\n      }\r\n   });\r\n       setCart(updatedCart);\r\n       localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n }else {    \r\n       const updatedCart = [...cart, { ...product, quantity: 1 }];\r\n       setCart(updatedCart);\r\n       localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n }\r\n}\r\n\r\nconst removeFromCart=(id)=>{\r\n    console.log(\"id\",id)\r\n const updatedCart =  cart.filter((item)=>item.id !== id);\r\n   setCart(updatedCart);\r\n   localStorage.setItem('cart',JSON.stringify(updatedCart));\r\n   console.log(\"CART\",cart);\r\n}\r\n\r\n const refreshData=async()=>{\r\n   try{\r\n  const response=  await axios.get(\"/products\");\r\n  setData(response.data);\r\n   }catch(error){\r\n    setIsError(error.message);\r\n   }\r\n }\r\n const clearCart=()=>{\r\n    setCart([]);\r\n }\r\n\r\n useEffect(()=>{\r\n    refreshData();\r\n },[]);\r\n\r\n useEffect(()=>{\r\n    localStorage.setItem('cart',JSON.stringify(cart))\r\n },[cart])\r\n  return (\r\n    <AppContext.Provider value={{data,isError,cart,addToCart,removeFromCart,refreshData,clearCart}}>{Children}</AppContext.Provider>\r\n  );\r\n};\r\nexport default AppContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}