{"ast":null,"code":"import _objectSpread from\"C:/Users/rajen/Downloads/springboot-backend/springboot-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from\"axios\";import\"../axios\";import{useState,useEffect,createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const AppContext=/*#__PURE__*/createContext({data:[],isError:\"\",cart:[],addToCart:product=>{},removeFromCart:id=>{},refreshData:()=>{},updateStockQuantity:(id,newQuantity)=>{}});export const AppProvider=_ref=>{let{children}=_ref;const[data,setData]=useState([]);const[isError,setIsError]=useState(\"\");const[cart,setCart]=useState(JSON.parse(localStorage.getItem('cart'))||[]);const addToCart=product=>{const existingProductIndex=cart.findIndex(item=>item.id===product.id);if(existingProductIndex!==-1){const updatedCart=cart.map((item,index)=>index===existingProductIndex?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item);setCart(updatedCart);localStorage.setItem('cart',JSON.stringify(updatedCart));}else{const updatedCart=[...cart,_objectSpread(_objectSpread({},product),{},{quantity:1})];setCart(updatedCart);localStorage.setItem('cart',JSON.stringify(updatedCart));}};const removeFromCart=id=>{console.log(\"productID\",id);const updatedCart=cart.filter(item=>item.id!==id);setCart(updatedCart);localStorage.setItem('cart',JSON.stringify(updatedCart));console.log(\"CART\",cart);};const refreshData=async()=>{try{const response=await axios.get(\"/product\");setData(response.data);}catch(error){setIsError(error.message);}};const clearCart=()=>{setCart([]);};useEffect(()=>{refreshData();},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{data,isError,cart,addToCart,removeFromCart,refreshData,clearCart},children:children});};export default AppContext;","map":{"version":3,"names":["axios","useState","useEffect","createContext","jsx","_jsx","AppContext","data","isError","cart","addToCart","product","removeFromCart","id","refreshData","updateStockQuantity","newQuantity","AppProvider","_ref","children","setData","setIsError","setCart","JSON","parse","localStorage","getItem","existingProductIndex","findIndex","item","updatedCart","map","index","_objectSpread","quantity","setItem","stringify","console","log","filter","response","get","error","message","clearCart","Provider","value"],"sources":["C:/Users/rajen/Downloads/springboot-backend/springboot-frontend/src/Context/Context.js"],"sourcesContent":["import axios from \"axios\";\r\nimport \"../axios\";\r\nimport { useState, useEffect, createContext } from \"react\";\r\n\r\nconst AppContext = createContext({\r\n  data: [],\r\n  isError: \"\",\r\n  cart: [],\r\n  addToCart: (product) => {},\r\n  removeFromCart: (id) => {},\r\n  refreshData:() =>{},\r\n  updateStockQuantity: (id, newQuantity) =>{}\r\n  \r\n});\r\n\r\nexport const AppProvider = ({ children }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isError, setIsError] = useState(\"\");\r\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\r\n\r\n\r\n  const addToCart = (product) => {\r\n    const existingProductIndex = cart.findIndex((item) => item.id === product.id);\r\n    if (existingProductIndex !== -1) {\r\n      const updatedCart = cart.map((item, index) =>   \r\n        index === existingProductIndex\r\n          ? { ...item, quantity: item.quantity + 1 }\r\n          : item\r\n      );\r\n      setCart(updatedCart);\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    } else {\r\n      const updatedCart = [...cart, { ...product, quantity: 1 }];\r\n      setCart(updatedCart);\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    }\r\n  };\r\n\r\n  const removeFromCart = (id) => {\r\n    console.log(\"productID\",id)\r\n    const updatedCart = cart.filter((item) => item.id !== id);\r\n    setCart(updatedCart);\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    console.log(\"CART\",cart)\r\n  };\r\n\r\n  const refreshData = async () => {\r\n    try {\r\n      const response = await axios.get(\"/product\");\r\n      setData(response.data);\r\n    } catch (error) {\r\n      setIsError(error.message);\r\n    }\r\n  };\r\n\r\n  const clearCart =() =>{\r\n    setCart([]);\r\n  }\r\n  \r\n  useEffect(() => {\r\n    refreshData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }, [cart]);\r\n  \r\n  return (\r\n    <AppContext.Provider value={{ data, isError, cart, addToCart, removeFromCart,refreshData, clearCart  }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AppContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}