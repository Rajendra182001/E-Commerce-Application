{"ast":null,"code":"import axios from'axios';import React,{useContext,useEffect,useState}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import AppContext from'../Context/Context';import{Button}from'bootstrap/dist/js/bootstrap.bundle.min';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Product=()=>{const{id}=useParams();const[product,setProduct]=useState(null);const[imageUrl,setImageUrl]=useState(\"\");const{data,addToCart,removeFromCart,cart,refreshData}=useContext(AppContext);const navigate=useNavigate();// Fetch product details and image\nuseEffect(()=>{const fetchProduct=async()=>{try{const response=await axios.get(\"http://localhost:8080/product/\".concat(id));setProduct(response.data);console.log(response.data);}catch(error){console.error(\"Error fetching product\",error);}};const fetchImage=async()=>{try{const res=await axios.get(\"http://localhost:8080/product/\".concat(id,\"/image\"),{responseType:\"blob\"});setImageUrl(URL.createObjectURL(res.data));}catch(error){console.error(\"Error fetching image\",error);}};fetchProduct();fetchImage();},[id]);if(!product){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}// Handle Add to Cart\nconst handleAddToCart=()=>{addToCart(product);alert(\"Product added to cart\");};const deleteProduct=async()=>{try{await axios.delete(\"http://localhost:8080/product/\".concat(id));removeFromCart(id);console.log(\"Product deleted successfully\");alert(\"Product deleted successfully\");refreshData();navigate(\"/\");}catch(error){console.error(\"Error deleting product:\",error);}};const handleEditClick=()=>{navigate(\"/product/updateProduct/\".concat(id));};return/*#__PURE__*/_jsx(\"div\",{className:\"outer-container\",style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100vh\",margin:\"0\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"containers\",style:{display:\"flex\",// Use flexbox to arrange items in a row\nwidth:\"80%\",// Make it responsive\nmaxWidth:\"900px\",// Limit maximum width\nborderRadius:\"10px\",margin:\"10px\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:\"10px\"},children:/*#__PURE__*/_jsx(\"img\",{className:\"left-column-img\",src:imageUrl,alt:product.imageName||\"Product image\",onError:e=>e.target.src='default-image.jpg'// Placeholder image on error\n,style:{width:\"100%\",// Make the image responsive\nheight:\"560px\",objectFit:\"contain\"}})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:\"20px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"span\",{children:product.category}),/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h5\",{children:product.brand}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-price mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mx-4\",children:/*#__PURE__*/_jsx(\"b\",{children:\"₹\"+product.price})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cart-btn \".concat(!product.available?\"disabled-btn\":\"\",\" btn-dark btn-sm btn rounded-pill\"),disabled:!product.available,onClick:handleAddToCart,children:product.available?\"Add to cart\":\"Out of Stock\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"h6\",{children:[\"Stock Available:\",\" \",/*#__PURE__*/_jsx(\"i\",{style:{color:\"green\",fontWeight:\"bold\"},children:product.quantity})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"release-date\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Product listed on:\"}),/*#__PURE__*/_jsx(\"i\",{children:product.releaseDate})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"update-button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm mx-3\",type:\"button\",onClick:handleEditClick,children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",type:\"button\",onClick:deleteProduct,children:\"Delete\"}),/*#__PURE__*/_jsx(\"hr\",{})]})]})]})});};export default Product;","map":{"version":3,"names":["axios","React","useContext","useEffect","useState","Link","useNavigate","useParams","AppContext","Button","jsx","_jsx","jsxs","_jsxs","Product","id","product","setProduct","imageUrl","setImageUrl","data","addToCart","removeFromCart","cart","refreshData","navigate","fetchProduct","response","get","concat","console","log","error","fetchImage","res","responseType","URL","createObjectURL","children","handleAddToCart","alert","deleteProduct","delete","handleEditClick","className","style","display","justifyContent","alignItems","height","margin","width","maxWidth","borderRadius","overflow","flex","padding","src","alt","imageName","onError","e","target","objectFit","category","name","brand","description","price","available","disabled","onClick","color","fontWeight","quantity","releaseDate","type"],"sources":["C:/Users/rajen/Downloads/springboot-backend/springboot-frontend/src/user/Product.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport AppContext from '../Context/Context';\r\nimport { Button } from 'bootstrap/dist/js/bootstrap.bundle.min';\r\n\r\nconst Product = () => {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  const { data, addToCart, removeFromCart, cart, refreshData } = useContext(AppContext);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch product details and image\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:8080/product/${id}`);\r\n        setProduct(response.data);\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching product\", error);\r\n      }\r\n    };\r\n\r\n    const fetchImage = async () => {\r\n      try {\r\n        const res = await axios.get(`http://localhost:8080/product/${id}/image`, {\r\n          responseType: \"blob\"\r\n        });\r\n        setImageUrl(URL.createObjectURL(res.data));\r\n      } catch (error) {\r\n        console.error(\"Error fetching image\", error);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n    fetchImage();\r\n  }, [id]);\r\n\r\n  if (!product) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n\r\n  // Handle Add to Cart\r\n  const handleAddToCart = () => {\r\n    addToCart(product);\r\n    alert(\"Product added to cart\");\r\n  };\r\n\r\n  const deleteProduct = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:8080/product/${id}`);\r\n      removeFromCart(id);\r\n      console.log(\"Product deleted successfully\");\r\n      alert(\"Product deleted successfully\");\r\n      refreshData();\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Error deleting product:\", error);\r\n    }\r\n  };\r\n\r\n\r\n  const handleEditClick = () => {\r\n    navigate(`/product/updateProduct/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"outer-container\"\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100vh\",\r\n        margin: \"0\",\r\n      }}\r\n    >\r\n      <div\r\n        className=\"containers\"\r\n        style={{\r\n          display: \"flex\", // Use flexbox to arrange items in a row\r\n          width: \"80%\", // Make it responsive\r\n          maxWidth: \"900px\", // Limit maximum width\r\n          borderRadius: \"10px\",\r\n          margin: \"10px\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        {/* Left Column for Image */}\r\n        <div style={{ flex: 1, padding: \"10px\" }}>\r\n          <img\r\n            className=\"left-column-img\"\r\n            src={imageUrl}\r\n            alt={product.imageName || \"Product image\"}\r\n            onError={(e) => (e.target.src = 'default-image.jpg')} // Placeholder image on error\r\n            style={{\r\n              width: \"100%\", // Make the image responsive\r\n              height: \"560px\", \r\n              objectFit: \"contain\",\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Right Column for Product Details */}\r\n        <div style={{ flex: 1, padding: \"20px\" }}>\r\n          <div className=\"product-description\">\r\n            <span>{product.category}</span>\r\n            <h1>{product.name}</h1>\r\n            <hr/>\r\n            <h5>{product.brand}</h5>\r\n            <p>{product.description}</p>\r\n          </div>\r\n\r\n          <div className=\"product-price mb-2\">\r\n            <span className=\"mx-4\">\r\n              <b>{\"₹\" + product.price}</b>\r\n            </span>\r\n            </div>\r\n            <div className='mb-3'>\r\n              <button\r\n                className={`cart-btn ${!product.available ? \"disabled-btn\" : \"\"} btn-dark btn-sm btn rounded-pill`}\r\n                disabled={!product.available}\r\n                onClick={handleAddToCart}\r\n              >\r\n                {product.available ? \"Add to cart\" : \"Out of Stock\"}\r\n              </button>\r\n            </div>\r\n            <div className='mb-2'>\r\n            <h6>\r\n              Stock Available:{\" \"}\r\n              <i style={{ color: \"green\", fontWeight: \"bold\" }}>\r\n                {product.quantity}\r\n              </i>\r\n            </h6>\r\n            </div>\r\n            <div>\r\n            <p className=\"release-date\">\r\n              <h6>Product listed on:</h6>\r\n              <i>{product.releaseDate}</i>\r\n            </p>\r\n          </div>\r\n\r\n          {/* Update and Delete buttons */}\r\n          <div className=\"update-button\">\r\n            <button className=\"btn btn-success btn-sm mx-3\" type=\"button\"\r\n            onClick={handleEditClick}>\r\n              Update\r\n            </button>\r\n            <button className=\"btn btn-danger btn-sm\" type=\"button\"\r\n            onClick={deleteProduct}>\r\n              Delete\r\n            </button>\r\n            <hr/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}